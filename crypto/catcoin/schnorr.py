import sys

x = 1001000101001110000111010100100011011110111010011110001111010001101110110111111100101110010101111111100101100101111001111101001011111110011011011111110010101111111101001101000110010110111111110111110100111000111101011110010111001001111101

p = 17665095522759531036058693257307341575070784202495789292037387794447504272949437066365726239851406402407663186831706615443497398329257752304888914629406645257736668463013719923481269072613351466547112273540321330193012007816652869211287516694287316819731927893850103917401360648573987342055898299086171088321570827878268077716984285047124707222864825807892510387570160470281108123933167152872828933200886314614889696787055200963585066106626860080775483300320948777637181491458045353276519354740043646796845692856209654413151707359588903783332872606155815144788287007665402989640929767882186232580763269186584765944899
r = 13341811916249252784139998041781280370756303560531328529922814086308973798774890908814325483096684367975639796089038277165790076323094449298276569936817394778389180271560055885981994488277660194806510806347874161714583171576299416548393646164086988511440682973228938031949116230057925291552118408575194595991278326137871763474713200453998350753069075551303593343876994221940440837451982660690423597789724516876204549524863988043208096352856586020545703865301547096182118044406666899377996885982838607941249786328651207028682374940844754093969498292496367093807942651902396761559918267931769977871475032122313196728102

first_message = pow(2, r, p)

def compute_first_message():
    return first_message

def compute_third_message(a, e):
    try:
        a = int(a)
        e = int(e)
    except ValueError:
        print("a or e was not an integer")
        exit(1)
    if a == first_message:
        if e < p:
            return (r + e*x) % (p-1)
            exit(0)
        else:
            print("e is too big")
            exit(1)
    else:
        print("a has not been sent before")
        exit(1)

sys.stdout.flush()
inputs = input().split()
if inputs[0] == "1":
    print(compute_first_message())
    exit(0)
elif inputs[0] == "3":
    if len(inputs) != 3:
        print("Incorrect input format: Wrong length")
        exit(1)
    else:
        a = inputs[1]
        e = inputs[2]
        print(compute_third_message(a, e))
        exit(0)
else:
    print("Incorrect input format: Wrong first part of input")
    exit(1)
